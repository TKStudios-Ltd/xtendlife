<div class="custom-gallery-wrapper">
  <!-- Thumbnails (left, vertical on desktop) -->
  <div class="swiper custom-gallery-thumbnails">
    <div class="swiper-wrapper">
      {% for media in product.media %}
        <div class="swiper-slide">
          {%- assign thumb_img = media.preview_image -%}
          {{ thumb_img | image_url: width: 160 | image_tag: loading: 'lazy', class: 'custom-gallery-thumbnail-image', alt: media.alt | escape }}
        </div>
      {% endfor %}
    </div>
  </div>

  <!-- Main Gallery (5:4 portrait) -->
  <div class="swiper custom-gallery-main">
    <div class="swiper-wrapper">
      {% for media in product.media %}
        <div class="swiper-slide">
          {% assign alt_text = media.alt | escape %}
          {% if media.media_type == 'image' %}
            {{ media
              | image_url: width: 1600
              | image_tag: class: 'custom-gallery-media-image', alt: alt_text, loading: load_attr
            }}
          {% else %}
            {{ media | media_tag: image_size: '2048x', autoplay: false, loop: false, controls: true, class: 'custom-gallery-media-other' }}
          {% endif %}
        </div>
      {% endfor %}
    </div>

    {% if product.media.size > 1 %}
      <div class="custom-gallery-arrows">
        <button class="swiper-button-prev custom-gallery-prev" aria-label="Previous image">
          <span class="svg-wrapper">
            {{- 'icon-arrow-long.svg' | inline_asset_content -}}
          </span>
        </button>
        <button class="swiper-button-next custom-gallery-next" aria-label="Next image">
          <span class="svg-wrapper">
            {{- 'icon-arrow-long.svg' | inline_asset_content -}}
          </span>
        </button>
      </div>
    {% endif %}
  </div>
</div>

<div class="custom-gallery-single-image">
  {{ product.featured_media | image_url: width: 800 | image_tag: loading: 'lazy', class: 'product-media-image' }}
</div>
